version: '3'

includes:
  hugo: ./Taskfile_{{OS}}.yml

tasks:
  default:
    desc: 'Run hugo:serve on {{OS}}'
    cmds:
      - task: 'hugo:serve'
        vars:
          HUGO_FLAGS: '-D'

  preview:
    desc: 'Run hugo:serve on {{OS}}, no drafts'
    cmds:
      - task: 'hugo:serve'
        vars:
          HUGO_FLAGS: ''

  build:
    desc: 'Build site'
    cmds:
      - hugo --minify

  deploy:
    desc: 'Deploy site'
    cmds:
      - task: 'build'
      - 'firebase deploy'